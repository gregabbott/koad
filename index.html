<!-- Merged 2025_08_21 -->
<html lang="en"><head><meta charset="UTF-8"><style>/* c.css */
:root{color-scheme: light dark;--light:hsl(60, 25%, 95%);--dark:hsl(15, 5%, 10%);--base_x1:15px;--half_base_x1:calc(var(--base_x1) * .5);--bg:light-dark(var(--light),var(--dark));--fg:light-dark(var(--dark),var(--light));--border: 1px solid var(--fg);--line_height:120%;--b_rad:3px;--dots: linear-gradient(45deg,var(--bg) 0 75%,var(--fg) 75% 100%);}* {border: none;outline:none;tab-size: 2ch;font-size-adjust: ex-height 0.53;box-sizing: border-box;margin: 0;padding: 0;font-family: monospace;font-size: var(--base_x1);line-height: var(--line_height);background: var(--bg);color: var(--fg);}html,body {min-height: 100dvh;max-height: 100dvh;height: 100dvh;max-width: 100dvw;min-width: 100dvw;width: 100dvw;}::selection{background-color: #80808025;}@media (prefers-color-scheme: dark) {::-moz-selection {color:var(--light);}::selection{color: var(--light);}}@media (prefers-color-scheme: light) {::-moz-selection{color:var(--dark);}::selection{color:var(--dark);}}#please_enable_js,[popover]{position: fixed;z-index: 9999999;left: 50%;padding: 1ch;top:2ch;width: 64ch;max-width: 90dvw;border: var(--border);border-radius: 3px;transform: translateX(-50%);background-color: var(--bg);}body:has(:popover-open){#hide_popover{display: block;}}p {margin-bottom: 1em;}#hide_popover,label[for="close_sub_menu"]{display: block;z-index: 3;background: #808080;opacity: 0;width: 100dvw;height: 100dvh;position: fixed;top: 0;left: 0;}.hide,#hide_popover,#close_sub_menu:checked + label[for="close_sub_menu"]{display: none !important;}header {padding: .5ch 1ch;text-align: center;min-height: 30px;}nav {background-color: transparent;z-index: 2;margin-bottom: -1px;display: flex;flex-direction: row;gap: 2px;}.menu_bar {gap:2px;display: flex;flex-direction: row;padding: 0 0 0 1ch;border: none;align-items: end;line-height: var(--line_height);& input[type=radio]{display: none;}& input[type=radio]:not(:checked) ~ .sub_menu_holder{display: none;}button span {display: inline;}}.menu_button {padding: 1px var(--half_base_x1);border-radius: 3px;border: 1px solid transparent;display: block;margin-bottom: 0px;line-height: 100%;&:hover {border: var(--border);}&:active {background: var(--fg);color: var(--bg);border: var(--border);border-color: var(--fg);}}.menu_item {position: relative;&:hover .sub_menu_holder{display: flex !important;}.sub_menu_holder{display: flex;flex-direction: column;position: absolute;top: 19px;background: var(--bg);min-width: 200px;border-radius: 3px;padding: 2px;z-index: 3;border: var(--border);span {border:1px solid transparent;text-align: left;padding: 0 var(--half_base_x1);}& hr{width: 100%;border-top: var(--border);margin: 2px 0;}.sub_menu_button {border-radius: 3px;border:1px solid transparent;background-color: transparent;width: 100%;white-space: pre;margin: 0px 0;display: block;padding: 0 var(--half_base_x1);line-height: var(--line_height);text-align: left;&:hover{cursor: pointer;border-color: var(--fg);}&:active {background: var(--fg);border-color: var(--fg);color: var(--bg);}}}}.menu_item > input:checked + .menu_button,.menu_item:hover .menu_button{border: 1px solid var(--fg)}body {overflow: hidden;display: flex;flex-direction: column;}::-webkit-scrollbar {width: 1ch;height: 1ch;}::-webkit-scrollbar-track,::-webkit-scrollbar-corner {background-color: transparent;}::-webkit-scrollbar-thumb {background: var(--dots);background-size: 2px 2px;cursor: default;}.rta {overflow: hidden;display:flex;height: 100%;position: relative;text-size-adjust: none;-webkit-text-size-adjust: none;font-size-adjust: ex-height 0.53;}.rta textarea::selection{color: red;}.rta textarea::-moz-selection {background-color: #80808025;}.rta pre,.rta textarea {background-color: transparent;line-height: var(--base_size);overflow-y: auto;overflow-x: hidden;white-space: pre-wrap;word-wrap: break-word;overflow-wrap: break-word;resize: none;outline: none;width: 100%;height: 100%;position: absolute;top: 0;left:0;padding: 0 0 50dvh 0;margin: 0;border:none;border-radius: 5px;scrollbar-gutter: stable;tab-size: 2;}.rta textarea{color: transparent;}.rta pre {span {background-color: transparent;white-space: pre-wrap;}.invisible{position: relative;}.invisible:after {display: block;content: "";width: .8ch;height: .8ch;transform: translate(-50%,-50%);background-color: var(--fg);border-radius: 20px;position: absolute;top: 50%;left: 50%;}.whitespace { color: light-dark(#CCCCCC, #444444); }.number { color: light-dark(#0550ae, #79B8FF); }.comment { color: light-dark(#6e7781, #8B949E); }.string { color: light-dark(#0a3069, #9ECBFF); }.keyword {--c:light-dark(#cf222e, #FF7B72);color: var(--c);-webkit-text-stroke: 1.5px var(--c);}.builtin { color: light-dark(#8250df, #D2A8FF); }.className { color: light-dark(#0550ae, #79B8FF); font-style: italic; }.hexColor,.function { color: light-dark(#6639ba, #D2A8FF); }.method { color: light-dark(#953800, #FFA657); }.variable { color: light-dark(#24292E, #C9D1D9); }.operator { color: light-dark(#24292E, #C9D1D9); }.punctuation { color: light-dark(#24292E, #C9D1D9); }.regex { color: light-dark(#0a3069, #9ECBFF); }.templateString { color: light-dark(#0a3069, #9ECBFF); }.templateInterpolation { color: light-dark(#953800, #FFA657); }.property { color: light-dark(#116329, #7EE787); }.propertyAccess { color: light-dark(#116329, #7EE787); }.other { color: light-dark(#24292f, #FF7B72); }.regexQuantifier { color: light-dark(#953800, #FFA657); }.regexCharClass { color: light-dark(#0550ae, #79B8FF); }.regexAnchor { color: light-dark(#cf222e, #FF7B72); }.regexGroup { color: light-dark(#8250df, #D2A8FF); }.regexFlag { color: light-dark(#116329, #7EE787); }.method + .punctuation + .method {color: light-dark(#953800, #FFA657);}.punctuation + .property {color: light-dark(#116329, #7EE787);}.keyword + .className {color: light-dark(#0550ae, #79B8FF);}}#input{caret-color: var(--fg);color: transparent;width: 100%;resize: none;height: 100%;}textarea::placeholder {white-space: pre-line;color: var(--fg);opacity: .5;}.textarea_holder {height: 0;flex-grow: 1;flex-shrink: 1;position: relative;padding: 1ch 0px 1ch 2ch;width: 100%;margin: 0 auto;overflow: hidden;border-width:0;display: flex;flex-direction: column;}#output > div {position: relative;white-space: pre-wrap;border: 1px dashed transparent;padding: 1ch;&:hover {border-color: var(--fg);}&:hover:before{display: block;}&:before {display: none;position: absolute;left: 1ch;z-index: 3;border-radius: var(--b_rad) var(--b_rad) 0 0;background-color: var(--bg);padding: 0 1ch;top: 0;transform: translateY(-100%);border: 1px dashed var(--fg);border-bottom-color: var(--bg);}}.ok_alert:before{content:'Alert'}.ok_confirm:before{content:'Confirm'}.ok_prompt:before{content:'Prompt'}.ok_log:before{content:'Log'}.ok_table:before{content:'Table'}.ok_rv:before{content:'Return'}#left {position: relative;}#undo_redo {text-align: right;button{width: 3ch;border: var(--border);border-color: transparent;border-radius: var(--b_rad);}button:hover,button:active{border-color: var(--fg);}.disabled {opacity: .5;xpointer-events: none;}}#right #output{margin: 0;}#right {padding: 1ch 1ch 1ch 0;}#output{padding-top: calc(1px + 2ch);overflow-y: scroll;}footer{padding: 0 1ch;min-height: 30px;display: flex;flex-direction: row;align-items: center;position: relative;justify-content: center;text-align: center;button {border-radius: var(--b_rad);width: auto;color: var(--fg);padding: 2px;background: transparent;border: var(--border);border-color: transparent;&:hover {border-color: var(--border);}}}footer,footer  *{font-size: 11px;}#cols{padding: 0 0ch;gap: 0ch;margin: 0 auto;overflow: hidden;width: 100%;flex-grow: 1;display: flex;flex-direction: row;}.no_select{user-select: none;-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;cursor: default;}#run {border: var(--border);}#run.active{background-color: var(--fg);color: var(--bg);}#left,#right{gap: 1ch;width: 50%;display: flex;flex-direction: column;}#column_sizer {width: 2ch;cursor: ew-resize;height: 100%;span{display: block;height: 100%;margin: 0 auto;width: 1px;}&:hover span, :active span {border-left-style: solid;}}.live_item_holder{flex-grow: 0;flex-shrink: 0;height: fit-content;}</style><link rel="icon" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbDpzcGFjZT0icHJlc2VydmUiIGlkPSJCeUdyZWdBYmJvdHQiIHg9IjAiIHk9IjAiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDIwMCAyMDAiPjxzdHlsZT4uc3Qxe2ZpbGw6I2U5NDAyNX0uc3Qye2ZvbnQtZmFtaWx5OiZxdW90O1ZlcmRhbmEmcXVvdDt9LnN0M3tmb250LXNpemU6MTEwcHh9PC9zdHlsZT48cGF0aCBmaWxsPSIjZmZmIiBkPSJNMCAwaDIwMHYyMDBIMHoiLz48dGV4dCBjbGFzcz0ic3QxIHN0MiBzdDMiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwIDk1KSI+S088L3RleHQ+PHRleHQgY2xhc3M9InN0MSBzdDIgc3QzIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMCAxOTApIj5BRDwvdGV4dD48L3N2Zz4="><title>Koad — Live JavaScript Code Runner and Playground</title></head><body><div popover="" id="popover_license"><p>By and Copyright © 2023-2025 <a href="https://gregabbott.pages.dev/">Greg Abbott</a>.<br> All rights reserved.<br> (Site, tool, documentation etc.)</p><p>NO WARRANTY<br> THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE. </p></div><header><nav class="no_select"><div class="menu_bar"><input name="m_bar" id="close_sub_menu" checked="" type="radio"><label for="close_sub_menu" hidden=""></label><div class="menu_item"><input hidden="" id="mm_about" name="m_bar" type="radio"><label class="menu_button" for="mm_about">Koad </label><fieldset role="presentation" class="sub_menu_holder"><button class="sub_menu_button" popovertarget="popover_license">License</button><a class="sub_menu_button" href="changelog.html">Change Log</a><span>Version 2025_0821</span></fieldset></div><div class="menu_item"><input id="mm_edit" hidden="" name="m_bar" type="radio"><label for="mm_edit" class="menu_button">Edit</label><fieldset role="presentation" class="sub_menu_holder"><div class="sub_menu_button" id="copy_input">Copy JavaScript</div><div class="sub_menu_button" id="copy_output">Copy Result</div><div class="sub_menu_button" id="clear_all">Clear all</div><div class="sub_menu_button" id="load_demo">Load demo</div></fieldset></div><div class="menu_item" id="save_menu_item"><input hidden="" id="mm_save" name="m_bar" type="radio"><label class="menu_button" for="mm_save">Save</label><fieldset role="presentation" class="sub_menu_holder"><div class="sub_menu_button" id="save_input">Save Input.js </div><div class="sub_menu_button" id="save_output">Save Output.js </div></fieldset></div><div class="menu_item"><input hidden="" id="live" type="checkbox" checked=""><label for="live" class="menu_button">Live</label></div><div id="run" class="menu_button" title="To see code output:
Click Run ('CMD+Enter' / 'CTRL+Enter' when input has focus)
OR enable Live mode">Run</div></div></nav></header><div id="cols"><div id="left" class="no_select"><div id="undo_redo"><button id="undo" class="disabled" title="UNDO">&lt;</button><button id="redo" class="disabled" title="REDO">&gt;</button></div><div class="textarea_holder"><textarea id="input" placeholder="Write JavaScript here and return a value to see it in the output area"></textarea></div></div><div id="column_sizer" title="Double click to reset to middle"><span></span></div><div id="right"><div id="output"></div></div></div><noscript><div id="please_enable_js">This page requires JavaScript.</div></noscript><div id="hide_popover"></div><footer><div><button popovertarget="popover_license">By + © </button><a href="https://gregabbott.pages.dev/">Greg Abbott</a> 2023-2025 | <a href="https://buymeacoffee.com/gregabbott">Buy Me A Coffee</a> | <a href="https://ko-fi.com/gregabbott">KoFi</a></div></footer><script>/* rich_textarea.js */
function setup_rich_textarea(e,t){if(!(e&&e instanceof HTMLTextAreaElement))throw Error("First argument must be a textarea element");if(!t||"object"!=typeof t)throw Error("Parser configuration must be an object");function n(e,t){t.scrollTop=e.scrollTop}const r=function(e){const t=Object.entries(e).reduce(((e,[t,n])=>{if(!(n instanceof RegExp))throw Error(`Rule '${t}' must be a RegExp`);return e[t]=n.source,e}),{}),n=Object.entries(t).map((([e,t])=>`(?<${e}>${t})`)),r=RegExp(n.join("|"),"g"),o=function(e=1e3){const t=new Map;return{get(e){const n=t.get(e);return n&&(t.delete(e),t.set(e,n)),n},set(n,r){if(t.size>=e){const e=t.keys().next().value;t.delete(e)}t.set(n,r)}}}(),s=(()=>{const e=RegExp(r,"y");return t=>{e.lastIndex=0;const n=e.exec(t);return n?Object.keys(n.groups).find((e=>n.groups[e])):""}})();return{split_into_tokens:e=>{if("string"!=typeof e)throw Error("Input must be a string");r.lastIndex=0;const t=[];let n;for(;null!==(n=r.exec(e));)t.push(n[0]);return t},identify:e=>{const t=o.get(e);if(void 0!==t)return t;const n=s(e);return o.set(e,n),n}}}(t),o=function(e){const t=document.createElement("div");t.className="rta";const n=document.createElement("pre");return e.parentNode.insertBefore(t,e),t.appendChild(n),t.appendChild(e),e.spellcheck=!1,n}(e),s=function(e,t,r){let o=null,s=0;const i=()=>{const i=e.value;if(!i)return void(t.innerHTML="");const c=function(e,t){const n=e.endsWith("\n"),r=n?e+" ":e;let o=t.split_into_tokens(r);return n&&" "===o[o.length-1]&&o.pop(),function(e,t){let n=e.reverse().findIndex((e=>"\n"!==e));for(n=-1===n?e.length:n,e.reverse();n<t;)e.push("\n"),n++;return e}(o,(e.match(/\n*$/)[0]||"").length)}(i,r);!function(e,t,n){const r=Array.from(e.childNodes),o=document.createDocumentFragment();t.forEach(((e,t)=>{if(t<r.length&&r[t].textContent===e)o.appendChild(r[t]);else{const t=document.createElement("span");t.className=n.identify(e),t.textContent=e,o.appendChild(t)}})),e.innerHTML="",e.appendChild(o)}(t,c,r),n(e,t),o=null,s=performance.now()};return()=>{performance.now();o&&cancelAnimationFrame(o),o=requestAnimationFrame(i)}}(e,o,r);return function(e,t,r){e.addEventListener("input",r),e.addEventListener("scroll",(()=>n(e,t))),e.addEventListener("paste",(()=>setTimeout(r,0)))}(e,o,s),function t(){document.contains(e)&&document.contains(o)?(s(),n(e,o)):setTimeout(t,10)}(),{input:e,output:o,update:s,destroy:()=>{e.removeEventListener("input",s),e.removeEventListener("scroll",(()=>n(e,o))),e.removeEventListener("paste",(()=>setTimeout(s,0))),o.parentNode&&o.parentNode.replaceWith(e)}}}
/* text_editor.js */
function setup_text_editor(e,t,n,l){const s=[],a=[];let i=0;const r="  ",o=l,c={"{":"}","[":"]","(":")","<":">",'"':'"',"'":"'"},u=()=>{t&&t.classList[0==s.length?"add":"remove"]("disabled"),n&&n.classList[0==a.length?"add":"remove"]("disabled")},d=(t=e)=>{let n=s.length?s[s.length-1]:null;(!n||t.value!==n.value)&&(s.push({value:t.value,selectionStart:t.selectionStart,selectionEnd:t.selectionEnd,timestamp:Date.now()}),a.length=0,i=Date.now(),f(),u())},h=((e,t)=>{let n;return function(...l){clearTimeout(n),n=setTimeout((()=>e(...l)),t)}})(d,800),g=(t,n,l=e)=>{if(!t.length)return!1;n.push({value:l.value,selectionStart:l.selectionStart,selectionEnd:l.selectionEnd,timestamp:Date.now()});let s=t.pop();return l.value=s.value,l.setSelectionRange(s.selectionStart,s.selectionEnd),u(),o(),!0},f=()=>{if(s.length<=200)return;let e=[],t=0,n=Date.now()-3e4;s.length>0&&e.push(s[0]),s.slice(1,-1).toReversed().forEach((l=>{if(l.timestamp>=n)return void e.unshift(l);let s=(e=>{let t=(Date.now()-e)/1e3;return[1,5,10,30][[30,120,300,900].findIndex((e=>t<e))]??60})(l.timestamp);l.timestamp-t>=1e3*s&&(e.unshift(l),t=l.timestamp)})),s.length>0&&e.push(s[s.length-1]),e.length>200&&(e=e.slice(e.length-200)),s.length=0,s.push(...e)};function p(t,n=e){const l=n.selectionStart,s=n.selectionEnd,a=n.value;let i=a.lastIndexOf("\n",l-1)+1,r=a.indexOf("\n",s);-1===r&&(r=a.length);const o=a.substring(i,r),c=s-l;let u,d;if("up"===t)n.setRangeText(o+"\n",i,i),u=i+(l-i);else{if("down"!==t)return;n.setRangeText("\n"+o,r,r),u=r+1+(l-i)}d=u+c,n.setSelectionRange(u,d),n.focus()}const v=t=>{let n=e.value.split("\n"),{selectionStart:l,selectionEnd:s}=e,a=e.value.substring(0,l).split("\n").length-1,i=e.value.substring(0,s).split("\n").length-1,r="up"===t,o=r?a-1:i+1;if(o<0||o>=n.length)return;let c=[0];for(let e=0;e<n.length-1;e++)c.push(c[e]+n[e].length+1);let u=l-c[a],d=s-c[i],h=n.slice(a,i+1),g=n[o];let f=a+(r?-1:1),p=i+(r?-1:1);r?n.splice(a-1,h.length+1,...h,g):n.splice(a,h.length+1,g,...h),e.value=n.join("\n");let v=(e=>{let t=[0];for(let n=0;n<e.length-1;n++)t.push(t[n]+e[n].length+1);return t})(n),m=v[f]+u,y=v[p]+d;e.setSelectionRange(m,y)},m=(t,n=e)=>{let l=n.selectionStart;n.setRangeText(t,l,n.selectionEnd,"end");let s=l+t.length;n.setSelectionRange(s,s)};function y(t,n=e){let l=r,{selectionStart:s,selectionEnd:a,value:i}=n,o=!1;if(s!==a){o=s===i.lastIndexOf("\n",s-1)+1}let c=i.lastIndexOf("\n",s-1)+1,u=i.indexOf("\n",a);-1===u&&(u=i.length);let d=i.slice(c,u).split(/(\r?\n)/),h=d.some((e=>e.startsWith("\t")||e.startsWith(" ")));if(!t&&!h)return;let g=d.map((e=>t?l+e:e.startsWith("\t")?e.slice(1):e.startsWith("  ")?e.slice(2):e.startsWith(" ")?e.slice(1):e)),f=g.join(""),p=g.reduce(((e,t,n)=>e+(t.length-d[n].length)),0),v=t?2:i.slice(c,s).startsWith(l)?-2:0;n.setRangeText(f,c,u,"preserve"),n.setSelectionRange(s+v,a+p)}const S=()=>y(!0);let F=()=>g(s,a),w=()=>g(a,s);const k=e=>e.sort().join("+"),x=[[["alt","shift","arrowup"],()=>p("up")],[["alt","shift","arrowdown"],()=>p("down")],[["alt","arrowup"],()=>v("up")],[["alt","arrowdown"],()=>v("down")],[["meta","["],()=>y(!1)],[["meta","]"],S],[["tab"],(t=e)=>{((t=e)=>{const{selectionStart:n,selectionEnd:l,value:s}=t;return n!==l&&n===s.lastIndexOf("\n",n-1)+1})(t)?S():m(r)}],[["shift","tab"],(t=e)=>{let{selectionStart:n,selectionEnd:l,value:s}=t,a=s.slice(0,n),i=s.slice(l);if(a.endsWith(r))a=a.slice(0,-2),n-=2;else if(/\n[ \t]*$/.test(a)){let e=a.match(/\n[ \t]*$/);a=a.slice(0,e.index+1),n-=e[0].length-1}t.setRangeText(a+i,0,s.length,"preserve"),t.setSelectionRange(n,n)}],[["control","z"],F],[["meta","z"],F],[["meta","shift","z"],w],[["control","y"],w]].reduce(((e,[t,n])=>(e[k(t)]=n,e)),{});let E=new Set(["Control","Meta","Shift","Alt","AltGraph","Tab","Escape","Enter","Backspace","Delete","CapsLock","NumLock","ScrollLock","Fn","FnLock","Symbol","SymbolLock","ContextMenu","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Home","End","PageUp","PageDown","PrintScreen","Pause","Insert","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","F13","F14","F15","F16","F17","F18","F19","F20","F21","F22","F23","F24","Convert","NonConvert","KanaMode","Lang1","Lang2"]);return e.addEventListener("input",(()=>{h(),o()})),e.addEventListener("keydown",(t=>{let n=function(e){let t=new Set;return t.add(e.key.toLowerCase()),e.metaKey&&t.add("meta"),e.ctrlKey&&t.add("control"),e.shiftKey&&t.add("shift"),e.altKey&&t.add("alt"),k([...t])}(t),l=x[n]||null;return l?(t.preventDefault(),l!==F&&l!==w&&d(),l(),void o()):("Enter"!==t.key||t.ctrlKey||t.metaKey||t.altKey||!((t=e)=>{d();const{selectionStart:n,value:l}=t,s=l.lastIndexOf("\n",n-1)+1,a=l.indexOf("\n",n),i=l.substring(s,-1===a?l.length:a),o=l.substring(s,n),c=i.match(/^[\t ]+/)||[""],u=/[{[(]\s*$/.test(o);let h=c[0];return u&&(h+=r),m("\n"+h,t),!0})(e))&&(!Object.keys(c).includes(t.key)||t.ctrlKey||t.metaKey||t.altKey||!((t,n=e)=>{if(!c[t])return!1;const{selectionStart:l,selectionEnd:s,value:a}=n;if("'"===t){const e=l>0&&/[a-z]/i.test(a[l-1]),t=s<a.length&&/\S/.test(a[s]);if(e||t)return!1}if(l!==s){const e=a.substring(l,s);n.setRangeText(t+e+c[t],l,s,"end"),n.setSelectionRange(s+2,s+2)}else n.setRangeText(t+c[t],l,s,"start"),n.setSelectionRange(l+1,l+1);return!0})(t.key,e))?void("Enter"===t.key||"Backspace"===t.key||"Delete"===t.key||(t.metaKey||t.ctrlKey)&&("v"===t.key||"x"===t.key)?d():t.ctrlKey||t.metaKey||t.altKey||E.has(t.key)||h()):(t.preventDefault(),void o())})),{set_value:t=>{d(),e.value=t,l()},undo_stack:s,redo_stack:a,undo:F,redo:w}}
/* j.js */
var gl0={};function make_string_ish(e){return e===globalThis?"globalThis":"function"==typeof e?e+"":void 0===e?"undefined":"string"!=typeof e?JSON.stringify(e,"null","  "):`"${e}"`}function parse_and_run(e,t){e.outputs=[];const n=t=>(...n)=>{e.outputs.push({kind:t,v:n.map(make_string_ish).join("\n")})},o={warn:n("warn"),log:n("log"),table:n("table")},i=t=>(e.outputs.push({kind:"prompt",v:`In Live mode, prompt("${t}"), returns "true"`}),"true"),r=t=>(e.outputs.push({kind:"confirm",v:`In Live mode, confirm("${t}"), returns true`}),!0),u=t?n("alert"):e=>alert(make_string_ish(e));try{e.rv=Function("alert","console","prompt","confirm",e.fn)(u,o,t?i:prompt,t?r:confirm),e.outputs.push({kind:"rv",v:make_string_ish(e.rv)})}catch(t){e.error=t.message+"<br>Could not extract exact position"}return e}(()=>{const e=(e,...t)=>t.reduce(((e,t)=>t(e)),e),t=[...document.querySelectorAll('[id]:not([id=""])')].reduce(((e,t)=>(e[t.id.trim()]=t,e)),{});let n=setup_rich_textarea(document.getElementById("input"),{invisible:/[\u200B\u200C\u200D\u205F\u3000\u202F\u00A0\u2028\u2029\u200E\u200F\u2028\u2029]/,string:/"[^"\\]*(?:\\.[^"\\]*)*"|'[^'\\]*(?:\\.[^'\\]*)*'/,templateString:/`[^`\\]*(?:\\.[^`\\]*)*`/,comment:/\/\*[\s\S]*?\*\/|\/\/[^\n]*/,regex:/\/(?![*/])(?:\[(?:[^\]\\\r\n]|\\.)*\]|[^\[/\\\r\n]|\\.)+\/[gimyus]*/,hexColor:/#[0-9a-fA-F]{3,8}\b/,propertyAccess:/\.[a-zA-Z_$][\w$]*(?=\s*\()?/,keyword:/\b(?:await|break|case|catch|class|const|let|continue|debugger|default|delete|do|else|enum|export|extends|false|finally|for|function|if|import|in|instanceof|new|null|return|super|switch|this|throw|true|try|typeof|var|void|while|with|yield)\b/,templateInterpolation:/\${(?:[^{}]|{[^}]*})*}/,builtin:/\b(?:Array|Boolean|Date|Error|Function|JSON|Math|Number|Object|Promise|RegExp|String|Symbol|Map|Set)\b/,function:/\b[a-zA-Z_$][\w$]*(?=\s*\()/,className:/\b[A-Z][\w$]*\b/,number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b|0x[\da-f]+\b/i,operator:/[+\-*/%&|^!=<>]=?|[?:~]|\.{3}/,punctuation:/[{}[\];(),]/,variable:/\b[a-zA-Z_$][\w$]*\b/,whitespace:/\s+/,other:/\S/});const o=setup_text_editor(t.input,t.undo,t.redo,(()=>{n.update()}));t.undo.onclick=()=>{o.undo()},t.redo.onclick=()=>{o.redo()};const i=()=>{const e=parse_and_run({fn:t.input.value},t.live.checked),{outputs:n,error:o}=e;if(o)return t.output.innerHTML=o,void t.input.focus();const i=document.createDocumentFragment();n.forEach(function(e){return({kind:t,v:n})=>{const o=document.createElement("div");o.textContent=n+"\n\n",o.classList.add("ok_"+t),o.addEventListener("dblclick",(()=>function(e){let t=document.createRange();t.selectNodeContents(e);let n=window.getSelection();n.removeAllRanges(),n.addRange(t)}(o))),e.appendChild(o)}}(i)),t.output.innerHTML="",t.output.appendChild(i),t.input.focus()};const r=({clicked:e,str:t})=>{if(navigator.clipboard.writeText(t),e){const t=e.innerText;e.innerText="Copied",setTimeout((()=>{e.innerText=t}),2e3)}},u="// A simple JavaScript code runner, playground and scratchpad.\n// Project <30KB. Written in vanilla JS.\nalert('In Live Mode, alerts appear in the output area instead.')\n// Disable Live Mode to use confirm() and prompt() normally.\n// (In Live mode, these return true and \"true\" automatically.)\n// Output methods include console.log and return:\nconsole.log(\n  {a:1,b:2},\n  x=>x+1,\n  undefined,\n  null,\n  {user_confirmed:confirm('Demo confirmation')},\n  1,\n  'Hello'\n)\nreturn 'Return Value'";function a(e){const n=t.column_sizer.parentElement.getBoundingClientRect(),o=e.clientX-n.left;t.left.style.width=o+"px",t.right.style.width=n.width-o-t.column_sizer.offsetWidth+"px"}function l(e,t){return n=>(n.addEventListener(e,t),n)}t.column_sizer.addEventListener("dblclick",(()=>{t.left.style.width="50%",t.right.style.width="50%"})),t.column_sizer.addEventListener("pointerdown",(e=>{document.addEventListener("pointermove",a),document.addEventListener("pointerup",(function(){document.removeEventListener("pointermove",a),t.input.focus()}),{once:!0})})),e(t.copy_input,l("click",(e=>{r({clicked:e.target,str:t.input.value}),t.input.focus()}))),e(t.copy_output,l("click",(e=>{r({clicked:e.target,str:t.output.textContent}),t.input.focus()}))),e(t.clear_all,l("click",(e=>{o.set_value(""),p(),i()}))),e(t.load_demo,l("click",(e=>{o.set_value(u),p(),i()})));const c=()=>{t.live.checked?(t.input.addEventListener("keyup",i),t.run.classList.add("hide"),i()):(t.input.removeEventListener("keyup",i),t.output.innerHTML="",t.run.classList.remove("hide"),t.input.focus())};l("click",i)(t.run),t.live.onchange=c;const d="js_code_runner_2023_0204";let s={input:"",live:"",selection:""};const p=()=>{var e;s.input=t.input.value,s.live=t.live.checked,s.selection=JSON.stringify((e=t.input)&&(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement)?{start:e.selectionStart,end:e.selectionEnd,direction:e.selectionDirection}:null),localStorage.setItem(d,JSON.stringify(s))},m=()=>{let e=localStorage.getItem(d);e?(s=JSON.parse(e),t.input.value=s.input,t.live.checked=s.live,s.selection&&(function(e,t){if(!e||!(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement)||!t)return!1;try{return e.setSelectionRange(t.start,t.end,t.direction||"none"),!0}catch(e){return console.error("Failed to set selection range:",e),!1}}(t.input,JSON.parse(s.selection)),function(e){if(e.selectionStart===e.selectionEnd)return;const t={width:e.clientWidth+"px",font:getComputedStyle(e).font,"white-space":"pre-wrap","word-wrap":"break-word",visibility:"hidden",position:"absolute",overflow:"hidden"},n=Object.assign(document.createElement("div"),{style:Object.entries(t).map((([e,t])=>`${e}:${t}`)).join(";"),textContent:e.value.substring(0,e.selectionEnd)});document.body.appendChild(n);const o=Math.max(0,n.clientHeight-e.clientHeight+(parseInt(getComputedStyle(e).lineHeight)||20));"function"==typeof e.scrollTo?e.scrollTo({top:o,behavior:"instant"}):(e.scrollTop=o,e.offsetHeight,e.scrollTop=o),document.body.removeChild(n)}(t.input))):(console.log("No localStorage to restore from"),t.input.value=u),n.update()};function v(e=new Date){const t=e=>(e+"").padStart(2,"0");return`${e.getFullYear()}_${t(e.getMonth()+1)}${t(e.getDate())}_${t(e.getHours())}${t(e.getMinutes())}`}function f({name:e,ext:t,data:n}){let o=new Blob([n],{type:"application/octet-stream"}),i=document.createElement("a");i.href=URL.createObjectURL(o),i.download=`${e}.${t}`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(i.href)}gl0.loaded=!1,window.addEventListener("load",(()=>{m(),c(),window.addEventListener("blur",(()=>{gl0.loaded&&p()})),window.addEventListener("beforeunload",(()=>{gl0.loaded&&p()})),window.addEventListener("pagehide",(()=>{gl0.loaded&&p()})),document.addEventListener("visibilitychange",(()=>{gl0.loaded&&"hidden"===document.visibilityState&&p()})),gl0.loaded=!0})),l("click",(()=>{let e=prompt('JS file base name "belowValue.js"',"input "+v());!e||(f({data:t.input.value,name:e,ext:"js"}),t.input.focus())}))(t.save_input),l("click",(()=>{f({data:t.output.textContent,name:"output "+v(),ext:"md"}),t.input.focus()}))(t.save_output);(({element:e,on:t,after:n})=>{const o=()=>{n&&n(),e.addEventListener("keydown",i)},i=n=>{(n.metaKey||n.ctrlKey)&&"Enter"===n.code&&(e.addEventListener("keyup",o,{once:!0}),e.removeEventListener("keydown",i),t())};e.addEventListener("keydown",i)})({element:t.input,on:()=>{t.run.classList.add("active"),setTimeout((()=>t.run.classList.remove("active")),500),setTimeout((()=>t.run.click()),1)}})})();</script></body></html>