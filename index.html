<!-- Merged 2025_03_30 -->
<html lang="en"><head><meta charset="UTF-8"><style>/* c.css */
:root{color-scheme: light dark;--light:hsl(60, 25%, 95%);--dark:hsl(15, 5%, 10%);--base_x1:15px;--half_base_x1:calc(var(--base_x1) * .5);--bg:light-dark(var(--light),var(--dark));--fg:light-dark(var(--dark),var(--light));--border: 1px solid var(--fg);--line_height:120%;--b_rad:3px;--dots: linear-gradient(45deg,var(--bg) 0 75%,var(--fg) 75% 100%);}* {border: none;outline:none;tab-size: 2ch;box-sizing: border-box;margin: 0;padding: 0;font-family: monospace;font-size: var(--base_x1);line-height: var(--line_height);background: var(--bg);color: var(--fg);}html,body {min-height: 100dvh;max-height: 100dvh;height: 100dvh;max-width: 100dvw;min-width: 100dvw;width: 100dvw;}::selection{background-color: #80808025;}::-moz-selection {background-color: #80808020;}@media (prefers-color-scheme: dark) {::-moz-selection {color:var(--light);}::selection{color: var(--light);}}@media (prefers-color-scheme: light) {::-moz-selection{color:var(--dark);}::selection{color:var(--dark);}}#please_enable_js,[popover]{position: fixed;z-index: 9999999;left: 50%;padding: 1ch;top:2ch;width: 64ch;max-width: 90dvw;border: var(--border);border-radius: 3px;transform: translateX(-50%);background-color: var(--bg);}body:has(:popover-open){#hide_popover{display: block;}}p {margin-bottom: 1em;}#hide_popover,label[for="close_sub_menu"]{display: block;z-index: 3;background: #808080;opacity: 0;width: 100dvw;height: 100dvh;position: fixed;top: 0;left: 0;}.hide,#hide_popover,#close_sub_menu:checked + label[for="close_sub_menu"]{display: none !important;}header {padding: .5ch 1ch;text-align: center;min-height: 30px;xborder-bottom: 1px dashed var(--fg);}nav {background-color: transparent;z-index: 2;margin-bottom: -1px;display: flex;flex-direction: row;gap: 2px;}.menu_bar {gap:2px;display: flex;flex-direction: row;padding: 0 0 0 1ch;border: none;align-items: end;line-height: var(--line_height);& input[type=radio]{display: none;}& input[type=radio]:not(:checked) ~ .sub_menu_holder{display: none;}button span {display: inline;}}.menu_button {padding: 1px var(--half_base_x1);border-radius: 3px;border: 1px solid transparent;display: block;margin-bottom: 0px;line-height: 100%;&:hover {border: var(--border);}&:active {background: var(--fg);color: var(--bg);border: var(--border);border-color: var(--fg);}}.menu_item {position: relative;&:hover .sub_menu_holder{display: flex !important;}.sub_menu_holder{display: flex;flex-direction: column;position: absolute;top: 19px;background: var(--bg);min-width: 200px;border-radius: 3px;padding: 2px;z-index: 3;border: var(--border);span {border:1px solid transparent;text-align: left;padding: 0 var(--half_base_x1);}& hr{width: 100%;border-top: var(--border);margin: 2px 0;}.sub_menu_button {border-radius: 3px;border:1px solid transparent;background-color: transparent;width: 100%;white-space: pre;margin: 0px 0;display: block;padding: 0 var(--half_base_x1);line-height: var(--line_height);text-align: left;&:hover{cursor: pointer;border-color: var(--fg);}&:active {background: var(--fg);border-color: var(--fg);color: var(--bg);}}}}.menu_item > input:checked + .menu_button,.menu_item:hover .menu_button{border: 1px solid var(--fg)}body {overflow: hidden;display: flex;flex-direction: column;}::-webkit-scrollbar {width: 1ch;height: 1ch;}::-webkit-scrollbar-track,::-webkit-scrollbar-corner {background-color: transparent;}::-webkit-scrollbar-thumb {background: var(--dots);background-size: 2px 2px;cursor: default;}.rta {overflow: hidden;display:flex;height: 100%;position: relative;text-size-adjust: none;-webkit-text-size-adjust: none;}.rta pre,.rta textarea {background-color: transparent;line-height: var(--base_size);overflow-y: auto;overflow-x: hidden;white-space: pre-wrap;word-wrap: break-word;overflow-wrap: break-word;resize: none;outline: none;width: 100%;height: 100%;position: absolute;top: 0;left:0;padding: 0 0 50dvh 0;margin: 0;border:none;border-radius: 5px;scrollbar-gutter: stable;tab-size: 2;}.rta textarea{color: transparent;}.rta pre {span {white-space: pre-wrap;}.invisible{position: relative;xbackground-color: red;}.invisible:after {display: block;content: "";width: .8ch;height: .8ch;transform: translate(-50%,-50%);background-color: var(--fg);border-radius: 20px;position: absolute;top: 50%;left: 50%;}.invisible { color: light-dark(#CCCCCC, #444444); }.whitespace { color: light-dark(#CCCCCC, #444444); }.number { color: light-dark(#0550ae, #79B8FF); }.comment { color: light-dark(#6e7781, #8B949E); }.string { color: light-dark(#0a3069, #9ECBFF); }.keyword { color: light-dark(#cf222e, #FF7B72); font-weight: bold; }.builtin { color: light-dark(#8250df, #D2A8FF); }.className { color: light-dark(#0550ae, #79B8FF); font-style: italic; }.hexColor,.function { color: light-dark(#6639ba, #D2A8FF); }.method { color: light-dark(#953800, #FFA657); }.variable { color: light-dark(#24292E, #C9D1D9); }.operator { color: light-dark(#24292E, #C9D1D9); }.punctuation { color: light-dark(#24292E, #C9D1D9); }.regex { color: light-dark(#0a3069, #9ECBFF); }.templateString { color: light-dark(#0a3069, #9ECBFF); }.templateInterpolation { color: light-dark(#953800, #FFA657); }.property { color: light-dark(#116329, #7EE787); }.propertyAccess { color: light-dark(#116329, #7EE787); }.other { color: light-dark(#24292f, #FF7B72); }.regexQuantifier { color: light-dark(#953800, #FFA657); }.regexCharClass { color: light-dark(#0550ae, #79B8FF); }.regexAnchor { color: light-dark(#cf222e, #FF7B72); }.regexGroup { color: light-dark(#8250df, #D2A8FF); }.regexFlag { color: light-dark(#116329, #7EE787); }.method + .punctuation + .method {color: light-dark(#953800, #FFA657);}.punctuation + .property {color: light-dark(#116329, #7EE787);}.keyword + .className {color: light-dark(#0550ae, #79B8FF);}}#input{caret-color: var(--fg);color: transparent;xcolor: 00000005;width: 100%;resize: none;height: 100%;}textarea::placeholder {white-space: pre-line;color: var(--fg);opacity: .5;}.textarea_holder {height: 0;flex-grow: 1;flex-shrink: 1;position: relative;padding: 1ch 0px 1ch 2ch;width: 100%;margin: 0 auto;overflow: hidden;border-width:0;display: flex;flex-direction: column;}#output > div {position: relative;white-space: pre-wrap;border: 1px dashed transparent;padding: 1ch;&:hover {border-color: var(--fg);}&:hover:before{display: block;}&:before {display: none;position: absolute;left: 1ch;z-index: 3;border-radius: var(--b_rad) var(--b_rad) 0 0;background-color: var(--bg);padding: 0 1ch;top: 0;transform: translateY(-100%);border: 1px dashed var(--fg);border-bottom-color: var(--bg);}}.ok_alert:before{content:'Alert'}.ok_confirm:before{content:'Confirm'}.ok_prompt:before{content:'Prompt'}.ok_log:before{content:'Log'}.ok_table:before{content:'Table'}.ok_rv:before{content:'Return'}#left {position: relative;}#undo_redo {.disabled {opacity: .5;pointer-events: none;}position: absolute;display: flex;gap: 2ch;font-size: 20px;top: 1ch;right: 1ch;}#right #output{margin: 0;}#right {padding: 1ch 1ch 1ch 0;}#output{padding-top: calc(1px + 2ch);overflow-y: scroll;}footer{xborder-top: 1px dashed var(--fg);padding: 0 1ch;min-height: 30px;display: flex;flex-direction: row;align-items: center;position: relative;justify-content: center;text-align: center;button {border-radius: var(--b_rad);width: auto;color: var(--fg);padding: 2px;background: transparent;border: var(--border);border-color: transparent;&:hover {border-color: var(--border);}}}footer,footer  *{font-size: 11px;}#cols{padding: 0 0ch;gap: 0ch;margin: 0 auto;overflow: hidden;width: 100%;flex-grow: 1;display: flex;flex-direction: row;}.no_select{user-select: none;-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;cursor: default;}#run {border: var(--border);}#run.active{background-color: var(--fg);color: var(--bg);}#left,#right{gap: 1ch;width: 50%;display: flex;flex-direction: column;}#column_sizer {width: 2ch;cursor: ew-resize;height: 100%;span{display: block;height: 100%;margin: 0 auto;width: 1px;xborder-left: 1px dashed var(--fg);}&:hover span, :active span {border-left-style: solid;}}.live_item_holder{flex-grow: 0;flex-shrink: 0;height: fit-content;}</style><link rel="icon" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbDpzcGFjZT0icHJlc2VydmUiIGlkPSJCeUdyZWdBYmJvdHQiIHg9IjAiIHk9IjAiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDIwMCAyMDAiPjxzdHlsZT4uc3Qxe2ZpbGw6I2U5NDAyNX0uc3Qye2ZvbnQtZmFtaWx5OiZxdW90O1ZlcmRhbmEmcXVvdDt9LnN0M3tmb250LXNpemU6MTEwcHh9PC9zdHlsZT48cGF0aCBmaWxsPSIjZmZmIiBkPSJNMCAwaDIwMHYyMDBIMHoiLz48dGV4dCBjbGFzcz0ic3QxIHN0MiBzdDMiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwIDk1KSI+S088L3RleHQ+PHRleHQgY2xhc3M9InN0MSBzdDIgc3QzIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMCAxOTApIj5BRDwvdGV4dD48L3N2Zz4="><title>Koad — Live JavaScript Code Runner and Playground</title></head><body><div popover="" id="popover_license"><p>By and Copyright © 2023-2025 <a href="https://gregabbott.pages.dev/">Greg Abbott</a>.<br> All rights reserved.<br> (Site, tool, documentation etc.)</p><p>NO WARRANTY<br> THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE. </p></div><header><nav class="no_select"><div class="menu_bar"><input name="m_bar" id="close_sub_menu" checked="" type="radio"><label for="close_sub_menu" hidden=""></label><div class="menu_item"><input hidden="" id="mm_about" name="m_bar" type="radio"><label class="menu_button" for="mm_about">Koad </label><fieldset role="presentation" class="sub_menu_holder"><button class="sub_menu_button" popovertarget="popover_license">License</button><a class="sub_menu_button" href="changelog.html">Change Log</a><span>Version 2025_0329</span></fieldset></div><div class="menu_item"><input id="mm_edit" hidden="" name="m_bar" type="radio"><label for="mm_edit" class="menu_button">Edit</label><fieldset role="presentation" class="sub_menu_holder"><div class="sub_menu_button" id="copy_input">Copy JavaScript</div><div class="sub_menu_button" id="copy_output">Copy Result</div><div class="sub_menu_button" id="clear_all">Clear all</div><div class="sub_menu_button" id="load_demo">Load demo</div></fieldset></div><div class="menu_item" id="save_menu_item"><input hidden="" id="mm_save" name="m_bar" type="radio"><label class="menu_button" for="mm_save">Save</label><fieldset role="presentation" class="sub_menu_holder"><div class="sub_menu_button" id="save_input">Save Input.js </div><div class="sub_menu_button" id="save_output">Save Output.js </div></fieldset></div><div class="menu_item"><input hidden="" id="live" type="checkbox" checked=""><label for="live" class="menu_button">Live</label></div><div id="run" class="menu_button" title="To see code output:
Click Run ('CMD+Enter' / 'CTRL+Enter' when input has focus)
OR enable Live mode">Run</div></div></nav></header><div id="cols"><div id="left" class="no_select"><div class="textarea_holder"><textarea id="input" placeholder="Write JavaScript here and return a value to see it in the output area"></textarea></div><div id="undo_redo"><button id="undo" class="disabled" title="UNDO">&lt;</button><button id="redo" class="disabled" title="REDO">&gt;</button></div></div><div id="column_sizer" title="Double click to reset to middle"><span></span></div><div id="right"><div id="output"></div></div></div><noscript><div id="please_enable_js">This page requires JavaScript.</div></noscript><div id="hide_popover"></div><footer><div><button popovertarget="popover_license">By + © </button><a href="https://gregabbott.pages.dev/">Greg Abbott</a> 2023-2025 | <a href="https://buymeacoffee.com/gregabbott">Buy Me A Coffee</a> | <a href="https://ko-fi.com/gregabbott">KoFi</a></div></footer><script>/* 
rich_textarea.js
text_editor.js
j.js
 */
function setup_rich_textarea(e,t){if(!(e&&e instanceof HTMLTextAreaElement))throw Error("First argument must be a textarea element");if(!t||"object"!=typeof t)throw Error("Parser configuration must be an object");function n(e,t){t.scrollTop=e.scrollTop}const o=function(e){const t=Object.entries(e).reduce(((e,[t,n])=>{if(!(n instanceof RegExp))throw Error(`Rule '${t}' must be a RegExp`);return e[t]=n.source,e}),{}),n=Object.entries(t).map((([e,t])=>`(?<${e}>${t})`)),o=RegExp(n.join("|"),"g"),i=function(e=1e3){const t=new Map;return{get(e){const n=t.get(e);return n&&(t.delete(e),t.set(e,n)),n},set(n,o){if(t.size>=e){const e=t.keys().next().value;t.delete(e)}t.set(n,o)}}}(),r=(()=>{const e=RegExp(o,"y");return t=>{e.lastIndex=0;const n=e.exec(t);return n?Object.keys(n.groups).find((e=>n.groups[e])):""}})();return{split_into_tokens:e=>{if("string"!=typeof e)throw Error("Input must be a string");o.lastIndex=0;const t=[];let n;for(;null!==(n=o.exec(e));)t.push(n[0]);return t},identify:e=>{const t=i.get(e);if(void 0!==t)return t;const n=r(e);return i.set(e,n),n}}}(t),i=function(e){const t=document.createElement("div");t.className="rta";const n=document.createElement("pre");return e.parentNode.insertBefore(t,e),t.appendChild(n),t.appendChild(e),e.spellcheck=!1,n}(e),r=function(e,t,o){let i=null,r=0;const l=()=>{const l=e.value;if(!l)return void(t.innerHTML="");const s=function(e,t){const n=e.endsWith("\n"),o=n?e+" ":e;let i=t.split_into_tokens(o);return n&&" "===i[i.length-1]&&i.pop(),function(e,t){let n=e.reverse().findIndex((e=>"\n"!==e));for(n=-1===n?e.length:n,e.reverse();n<t;)e.push("\n"),n++;return e}(i,(e.match(/\n*$/)[0]||"").length)}(l,o);!function(e,t,n){const o=Array.from(e.childNodes),i=document.createDocumentFragment();t.forEach(((e,t)=>{if(t<o.length&&o[t].textContent===e)i.appendChild(o[t]);else{const t=document.createElement("span");t.className=n.identify(e),t.textContent=e,i.appendChild(t)}})),e.innerHTML="",e.appendChild(i)}(t,s,o),n(e,t),i=null,r=performance.now()};return()=>{performance.now();i&&cancelAnimationFrame(i),i=requestAnimationFrame(l)}}(e,i,o);return function(e,t,o){e.addEventListener("input",o),e.addEventListener("scroll",(()=>n(e,t))),e.addEventListener("paste",(()=>setTimeout(o,0)))}(e,i,r),function t(){document.contains(e)&&document.contains(i)?(r(),n(e,i)):setTimeout(t,10)}(),{input:e,output:i,update:r,destroy:()=>{e.removeEventListener("input",r),e.removeEventListener("scroll",(()=>n(e,i))),e.removeEventListener("paste",(()=>setTimeout(r,0))),i.parentNode&&i.parentNode.replaceWith(e)}}}function setup_text_editor(e,t,n,o){const i=[],r=[];let l=0;const s=()=>{t&&t.classList[0==i.length?"add":"remove"]("disabled"),n&&n.classList[0==r.length?"add":"remove"]("disabled")},a=(t=e)=>{let n=i.length?i[i.length-1]:null;(!n||t.value!==n.value)&&(i.push({value:t.value,selectionStart:t.selectionStart,selectionEnd:t.selectionEnd,timestamp:Date.now()}),r.length=0,l=Date.now(),u(),s())},c=(t,n,o=e)=>{if(!t.length)return!1;n.push({value:o.value,selectionStart:o.selectionStart,selectionEnd:o.selectionEnd,timestamp:Date.now()});let i=t.pop();return o.value=i.value,o.setSelectionRange(i.selectionStart,i.selectionEnd),s(),!0},u=()=>{let e=[],t=0,n=Date.now()-3e4;i.toReversed().forEach((o=>{if(o.timestamp>=n)return void e.unshift(o);let i=(e=>{let t=(Date.now()-e)/1e3;return[1,5,10,30][[30,120,300,900].findIndex((e=>t<e))]??60})(o.timestamp);o.timestamp-t>=1e3*i&&(e.unshift(o),t=o.timestamp)})),i.length=0,i.push(...e)};let d="  ";function p(t,n=e){const o=n.selectionStart,i=n.selectionEnd,r=n.value;let l=r.lastIndexOf("\n",o-1)+1,s=r.indexOf("\n",i);-1===s&&(s=r.length);const a=r.substring(l,s),c=i-o;let u,d;if("up"===t)n.setRangeText(a+"\n",l,l),u=l+(o-l);else{if("down"!==t)return;n.setRangeText("\n"+a,s,s),u=s+1+(o-l)}d=u+c,n.setSelectionRange(u,d),n.focus()}const m=t=>{let n=e.value.split("\n"),{selectionStart:o,selectionEnd:i}=e,r=e.value.substring(0,o).split("\n").length-1,l=e.value.substring(0,i).split("\n").length-1,s="up"===t,a=s?r-1:l+1;if(a<0||a>=n.length)return;let c=[0];for(let e=0;e<n.length-1;e++)c.push(c[e]+n[e].length+1);let u=o-c[r],d=i-c[l],p=n.slice(r,l+1),m=n[a];let f=r+(s?-1:1),h=l+(s?-1:1);s?n.splice(r-1,p.length+1,...p,m):n.splice(r,p.length+1,m,...p),e.value=n.join("\n");let g=(e=>{let t=[0];for(let n=0;n<e.length-1;n++)t.push(t[n]+e[n].length+1);return t})(n),v=g[f]+u,y=g[h]+d;e.setSelectionRange(v,y)};function f(t,n=e){let o=d,{selectionStart:i,selectionEnd:r,value:l}=n,s=l.lastIndexOf("\n",i-1)+1,a=l.indexOf("\n",r);-1===a&&(a=l.length);let c=l.slice(s,a).split(/(\r?\n)/),u=c.some((e=>e.startsWith("\t")||e.startsWith(" ")));if(!t&&!u)return;let p=c.map((e=>t?o+e:e.startsWith("\t")?e.slice(1):e.startsWith("  ")?e.slice(2):e.startsWith(" ")?e.slice(1):e)),m=p.join(""),f=p.reduce(((e,t,n)=>e+(t.length-c[n].length)),0),h=t?2:l.slice(s,i).startsWith(o)?-2:0;n.setRangeText(m,s,a,"preserve"),n.setSelectionRange(i+h,r+f)}let h=()=>c(i,r),g=()=>c(r,i);const v=e=>e.sort().join("+"),y=[[["alt","shift","arrowup"],()=>p("up")],[["alt","shift","arrowdown"],()=>p("down")],[["alt","arrowup"],()=>m("up")],[["alt","arrowdown"],()=>m("down")],[["meta","["],()=>f(!1)],[["meta","]"],()=>f(!0)],[["tab"],()=>((t,n=e)=>{let o=n.selectionStart;n.setRangeText(t,o,n.selectionEnd,"end");let i=o+t.length;n.setSelectionRange(i,i)})(d)],[["shift","tab"],(t=e)=>{let{selectionStart:n,selectionEnd:o,value:i}=t,r=i.slice(0,n),l=i.slice(o);if(r.endsWith(d))r=r.slice(0,-2),n-=2;else if(/\n[ \t]*$/.test(r)){let e=r.match(/\n[ \t]*$/);r=r.slice(0,e.index+1),n-=e[0].length-1}t.setRangeText(r+l,0,i.length,"preserve"),t.setSelectionRange(n,n)}],[["control","z"],h],[["meta","z"],h],[["meta","shift","z"],g],[["control","y"],g]].reduce(((e,[t,n])=>(e[v(t)]=n,e)),{});let w=new Set(["Control","Meta","Shift","Alt","AltGraph","Tab","Escape","Enter","Backspace","Delete","CapsLock","NumLock","ScrollLock","Fn","FnLock","Symbol","SymbolLock","ContextMenu","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Home","End","PageUp","PageDown","PrintScreen","Pause","Insert","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","F13","F14","F15","F16","F17","F18","F19","F20","F21","F22","F23","F24","Convert","NonConvert","KanaMode","Lang1","Lang2"]);return e.addEventListener("keydown",(e=>{let t=function(e){let t=new Set;return t.add(e.key.toLowerCase()),e.metaKey&&t.add("meta"),e.ctrlKey&&t.add("control"),e.shiftKey&&t.add("shift"),e.altKey&&t.add("alt"),v([...t])}(e),n=y[t]||null;n?(e.preventDefault(),n!==h&&n!==g&&a(),n(),o()):"enter"===e.key||"backspace"===e.key||"delete"===e.key||(e.metaKey||e.ctrlKey)&&("v"===e.key||"x"===e.key)?a():e.ctrlKey||e.metaKey||e.altKey||w.has(e.key)||Date.now()-l>2e3&&a()})),{set_value:t=>{a(),e.value=t,o()},undo_stack:i,redo_stack:r,undo:h,redo:g}}var gl0={};function make_string_ish(e){return e===globalThis?"globalThis":"function"==typeof e?e+"":void 0===e?"undefined":"string"!=typeof e?JSON.stringify(e,"null","  "):`"${e}"`}function parse_and_run(e,t){e.outputs=[];const n=t=>(...n)=>{e.outputs.push({kind:t,v:n.map(make_string_ish).join("\n")})},o={log:n("log"),table:n("table")},i=t=>(e.outputs.push({kind:"prompt",v:`In Live mode, prompt("${t}"), returns "true"`}),"true"),r=t=>(e.outputs.push({kind:"confirm",v:`In Live mode, confirm("${t}"), returns true`}),!0),l=t?n("alert"):e=>alert(make_string_ish(e));try{e.rv=Function("alert","console","prompt","confirm",e.fn)(l,o,t?i:prompt,t?r:confirm),e.outputs.push({kind:"rv",v:make_string_ish(e.rv)})}catch(t){e.error=t.message+"<br>Could not extract exact position"}return e}(()=>{const e=(e,...t)=>t.reduce(((e,t)=>t(e)),e),t=e=>(console.log(e),e),n={};["input","copy_input","save_input","output","copy_output","save_output","clear_all","load_demo","live","run","left","right","column_sizer","undo","redo"].forEach((e=>n[e]=(e=>document.getElementById(e))(e)));let o=setup_rich_textarea(document.getElementById("input"),{string:/"[^"\\]*(?:\\.[^"\\]*)*"|'[^'\\]*(?:\\.[^'\\]*)*'/,templateString:/`[^`\\]*(?:\\.[^`\\]*)*`/,comment:/\/\*[\s\S]*?\*\/|\/\/[^\n]*/,regex:/\/(?![*/])(?:\[(?:[^\]\\\r\n]|\\.)*\]|[^\[/\\\r\n]|\\.)+\/[gimyus]*/,hexColor:/#[0-9a-fA-F]{3,8}\b/,propertyAccess:/\.[a-zA-Z_$][\w$]*(?=\s*\()?/,keyword:/\b(?:await|break|case|catch|class|const|let|continue|debugger|default|delete|do|else|enum|export|extends|false|finally|for|function|if|import|in|instanceof|new|null|return|super|switch|this|throw|true|try|typeof|var|void|while|with|yield)\b/,templateInterpolation:/\${(?:[^{}]|{[^}]*})*}/,builtin:/\b(?:Array|Boolean|Date|Error|Function|JSON|Math|Number|Object|Promise|RegExp|String|Symbol|Map|Set)\b/,function:/\b[a-zA-Z_$][\w$]*(?=\s*\()/,className:/\b[A-Z][\w$]*\b/,number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b|0x[\da-f]+\b/i,operator:/[+\-*/%&|^!=<>]=?|[?:~]|\.{3}/,punctuation:/[{}[\];(),]/,variable:/\b[a-zA-Z_$][\w$]*\b/,whitespace:/\s+/,other:/\S/});const i=setup_text_editor(n.input,n.undo,n.redo,(()=>{o.update()}));n.undo.onclick=()=>{i.undo()},n.redo.onclick=()=>{i.redo()};const r=()=>{const e=parse_and_run({fn:n.input.value},n.live.checked),{outputs:t,error:o}=e;if(o)return n.output.innerHTML=o,void n.input.focus();const i=document.createDocumentFragment();t.forEach(function(e){return({kind:t,v:n})=>{const o=document.createElement("div");o.textContent=n+"\n\n",o.classList.add("ok_"+t),o.onclick=()=>function(e){let t=document.createRange();t.selectNodeContents(e);let n=window.getSelection();n.removeAllRanges(),n.addRange(t)}(o),e.appendChild(o)}}(i)),n.output.innerHTML="",n.output.appendChild(i),n.input.focus()};const l=({clicked:e,str:t})=>{if(navigator.clipboard.writeText(t),e){const t=e.innerText;e.innerText="Copied",setTimeout((()=>{e.innerText=t}),2e3)}},s="// A simple JavaScript code runner, playground and scratchpad.\n// Project <30KB. Written in vanilla JS.\nalert('In Live Mode, alerts appear in the output area instead.')\n// Disable Live Mode to use confirm() and prompt() normally.\n// (In Live mode, these return true and \"true\" automatically.)\n// Output methods include console.log and return:\nconsole.log(\n  {a:1,b:2},\n  x=>x+1,\n  undefined,\n  null,\n  {user_confirmed:confirm('Demo confirmation')},\n  1,\n  'Hello'\n)\nreturn 'Return Value'";function a(e){const t=n.column_sizer.parentElement.getBoundingClientRect(),o=e.clientX-t.left;n.left.style.width=o+"px",n.right.style.width=t.width-o-n.column_sizer.offsetWidth+"px"}function c(e,t){return n=>(n.addEventListener(e,t),n)}n.column_sizer.addEventListener("dblclick",(()=>{n.left.style.width="50%",n.right.style.width="50%"})),n.column_sizer.addEventListener("pointerdown",(e=>{document.addEventListener("pointermove",a),document.addEventListener("pointerup",(function(){document.removeEventListener("pointermove",a),n.input.focus()}),{once:!0})})),e(n.copy_input,c("click",(e=>{l({clicked:e.target,str:n.input.value}),n.input.focus()}))),e(n.copy_output,c("click",(e=>{l({clicked:e.target,str:n.output.textContent}),n.input.focus()}))),e(n.clear_all,c("click",(e=>{i.set_value(""),m(),r()}))),e(n.load_demo,c("click",(e=>{i.set_value(s),m(),r()})));const u=()=>{n.live.checked?(n.input.addEventListener("keyup",r),n.run.classList.add("hide"),r()):(n.input.removeEventListener("keyup",r),n.output.innerHTML="",n.run.classList.remove("hide"),n.input.focus())};c("click",r)(n.run),n.live.onchange=u;const d="js_code_runner_2023_0204";let p={input:"",live:"",selection:""};const m=()=>{var e;p.input=n.input.value,p.live=n.live.checked,p.selection=JSON.stringify((e=n.input)&&(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement)?{start:e.selectionStart,end:e.selectionEnd,direction:e.selectionDirection}:null),localStorage.setItem(d,JSON.stringify(p))},f=()=>{let e=localStorage.getItem(d);e?(t("Restoring from localStorage"),p=JSON.parse(e),n.input.value=p.input,n.live.checked=p.live,p.selection&&(function(e,t){if(!e||!(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement)||!t)return!1;try{return e.setSelectionRange(t.start,t.end,t.direction||"none"),!0}catch(e){return console.error("Failed to set selection range:",e),!1}}(n.input,JSON.parse(p.selection)),function(e){if(e.selectionStart===e.selectionEnd)return;const t={width:e.clientWidth+"px",font:getComputedStyle(e).font,"white-space":"pre-wrap","word-wrap":"break-word",visibility:"hidden",position:"absolute",overflow:"hidden"},n=Object.assign(document.createElement("div"),{style:Object.entries(t).map((([e,t])=>`${e}:${t}`)).join(";"),textContent:e.value.substring(0,e.selectionEnd)});document.body.appendChild(n);const o=Math.max(0,n.clientHeight-e.clientHeight+(parseInt(getComputedStyle(e).lineHeight)||20));"function"==typeof e.scrollTo?e.scrollTo({top:o,behavior:"instant"}):(e.scrollTop=o,e.offsetHeight,e.scrollTop=o),document.body.removeChild(n)}(n.input))):(t("No localStorage to restore from"),n.input.value=s),o.update()};function h(e=new Date){const t=e=>(e+"").padStart(2,"0");return`${e.getFullYear()}_${t(e.getMonth()+1)}${t(e.getDate())}_${t(e.getHours())}${t(e.getMinutes())}`}function g({name:e,ext:t,data:n}){let o=new Blob([n],{type:"application/octet-stream"}),i=document.createElement("a");i.href=URL.createObjectURL(o),i.download=`${e}.${t}`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(i.href)}gl0.loaded=!1,window.addEventListener("load",(()=>{f(),u(),window.addEventListener("blur",(()=>{gl0.loaded&&(t("storing when Window lost focus"),m())})),window.addEventListener("beforeunload",(()=>{gl0.loaded&&(t("storing onbeforeunload"),m())})),window.addEventListener("pagehide",(()=>{gl0.loaded&&(t("storing on pagehide"),m())})),document.addEventListener("visibilitychange",(()=>{gl0.loaded&&"hidden"===document.visibilityState&&(console.log("storing on visibility change to hidden"),m())})),gl0.loaded=!0})),c("click",(()=>{g({data:n.input.value,name:"input "+h(),ext:"js"}),n.input.focus()}))(n.save_input),c("click",(()=>{g({data:n.output.textContent,name:"output "+h(),ext:"md"}),n.input.focus()}))(n.save_output);(({element:e,on:t,after:n})=>{const o=()=>{n&&n(),e.addEventListener("keydown",i)},i=n=>{(n.metaKey||n.ctrlKey)&&"Enter"===n.code&&(e.addEventListener("keyup",o,{once:!0}),e.removeEventListener("keydown",i),t())};e.addEventListener("keydown",i)})({element:n.input,on:()=>{n.run.classList.add("active"),setTimeout((()=>n.run.classList.remove("active")),500),setTimeout((()=>n.run.click()),1)}})})();</script></body></html>